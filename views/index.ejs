<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Runescape Inventory</title>
    <link rel="icon" href="/icon/runescape.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!-- Button trigger modal -->
    <button
      type="button"
      class="btn btn-primary position-absolute end-0"
      data-bs-toggle="modal"
      data-bs-target="#exampleModal"
    >
      Create Item
    </button>

    <!-- Modal -->
    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Create Item</h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <form
            action="/items/create"
            method="POST"
            enctype="multipart/form-data"
          >
            <div class="modal-body">
              <div class="mb-3">
                <label for="name" class="form-label">Item Name:</label>
                <input
                  class="form-control"
                  type="text"
                  name="name"
                  id="name"
                  required
                />
              </div>

              <div class="mb-3">
                <label for="category" class="form-label">Item category: </label>
                <select
                  name="category"
                  id="category"
                  class="form-control"
                  required
                >
                  <option value="" disabled selected hidden>
                    Choose your category...
                  </option>
                  <option value="weapons">Weapons</option>
                  <option value="armour">Armour</option>
                  <option value="potions">Potions</option>
                  <option value="food">Food</option>
                  <!-- <option value="uncategorised">Uncategorised</option> -->
                </select>
              </div>

              <div id="weapons-fields" class="category-section d-none">
                <div class="mb-3 form-check form-control">
                  <input type="checkbox" name="wepMem" id="wepMem" />
                  <label for="wepMem">Members</label>
                </div>
                <div class="mb-3">
                  <label for="wepReq">Requirements: </label>
                  <input
                    type="text"
                    name="wepReq"
                    id="wepReq"
                    class="form-control"
                  />
                </div>
                <div class="mb-3">
                  <label for="wepPrice">Price: </label>
                  <input
                    type="number"
                    min="1"
                    name="wepPrice"
                    id="wepPrice"
                    class="form-control"
                  />
                </div>
                <div>
                  <label for="wepWeight">Weight: </label>
                  <input
                    type="number"
                    step="0.01"
                    name="wepWeight"
                    id="wepWeight"
                    class="form-control"
                  />
                </div>
                <div>
                  <label for="wepType">Weapon Type: </label>
                  <select name="wepType" id="wepType" class="form-control">
                    <option value="Melee">Melee</option>
                    <option value="Ranged">Ranged</option>
                    <option value="Magic">Magic</option>
                  </select>
                </div>
              </div>

              <div id="armour-fields" class="category-section d-none">
                <div class="mb-3 form-check form-control">
                  <input type="checkbox" name="members" id="members" />
                  <label for="members">Members</label>
                </div>
                <div class="mb-3">
                  <label for="armReq">Requirements: </label>
                  <input
                    type="text"
                    name="armReq"
                    id="armReq"
                    class="form-control"
                  />
                </div>
                <div class="mb-3">
                  <label for="armPrice">Price: </label>
                  <input
                    type="number"
                    min="1"
                    name="armPrice"
                    id="armPrice"
                    class="form-control"
                  />
                </div>
                <div>
                  <label for="armWeight">Weight: </label>
                  <input
                    type="number"
                    step="0.01"
                    name="armWeight"
                    id="armWeight"
                    class="form-control"
                  />
                </div>
                <div>
                  <label for="armType">Armour Type: </label>
                  <select name="armType" id="armType" class="form-control">
                    <option value="Melee">Melee</option>
                    <option value="Ranged">Ranged</option>
                    <option value="Magic">Magic</option>
                  </select>
                </div>
              </div>

              <div id="potions-fields" class="category-section d-none">
                <div class="mb-3 form-check form-control">
                  <input type="checkbox" name="potMem" id="potMem" />
                  <label for="potMem">Members</label>
                </div>
                <div class="mb-3">
                  <label for="effect">Effect: </label>
                  <input
                    type="text"
                    name="effect"
                    id="effect"
                    class="form-control"
                  />
                </div>
                <div class="mb-3">
                  <label for="potPrice">Price: </label>
                  <input
                    type="number"
                    min="1"
                    name="potPrice"
                    id="potPrice"
                    class="form-control"
                  />
                </div>
                <div>
                  <label for="potWeight">Weight: </label>
                  <input
                    type="number"
                    step="0.01"
                    name="potWeight"
                    id="potWeight"
                    class="form-control"
                  />
                </div>
              </div>

              <div id="food-fields" class="category-section d-none">
                <div class="mb-3 form-check form-control">
                  <input type="checkbox" name="foodMem" id="foodMem" />
                  <label for="foodMem">Members</label>
                </div>
                <div class="mb-3">
                  <label for="heal">Heal: </label>
                  <input
                    type="text"
                    name="heal"
                    id="heal"
                    class="form-control"
                  />
                </div>
                <div class="mb-3">
                  <label for="foodPrice">Price: </label>
                  <input
                    type="number"
                    min="1"
                    name="foodPrice"
                    id="foodPrice"
                    class="form-control"
                  />
                </div>
                <div>
                  <label for="foodWeight">Weight: </label>
                  <input
                    type="number"
                    step="0.01"
                    name="foodWeight"
                    id="foodWeight"
                    class="form-control"
                  />
                </div>
              </div>

              <div class="mb-3">
                <label for="image" class="form-label">Item Image</label>
                <input
                  type="file"
                  id="image"
                  name="image"
                  class="form-control"
                  required
                />
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
              <button type="submit" class="btn btn-primary">Add Item</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <%- include("partials/navigation") %>

    <!-- Categories Grid -->
    <div class="container">
      <div class="row mb-3">
        <div class="col">
          <a href="/weapons" class="text-decoration-none">
            <div class="card text-bg-dark">
              <img
                src="/weapons/dds.webp"
                alt="Weapons"
                class="card-img-top"
                style="height: 200px; object-fit: contain"
              />
              <div class="card-img-overlay">
                <h2 class="card-title">Weapons</h2>
              </div>
            </div>
          </a>
        </div>
        <div class="col">
          <a href="/armour" class="text-decoration-none">
            <div class="card text-bg-dark">
              <img
                src="/armour/rune.png"
                alt="Armour"
                class="card-img-top"
                style="height: 200px; object-fit: contain"
              />
              <div class="card-img-overlay">
                <h2 class="card-title">Armour</h2>
              </div>
            </div>
          </a>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <a href="/potions" class="text-decoration-none">
            <div class="card text-bg-dark">
              <img
                src="/potions/saradominbrew.png"
                alt="Potions"
                class="card-img-top"
                style="height: 200px; object-fit: contain"
              />
              <div class="card-img-overlay">
                <h2 class="card-title">Potions</h2>
              </div>
            </div>
          </a>
        </div>
        <div class="col">
          <a href="/food" class="text-decoration-none">
            <div class="card text-bg-dark">
              <img
                src="/food/anchovypizza.png"
                alt="Food"
                class="card-img-top"
                style="height: 200px; object-fit: contain"
              />
              <div class="card-img-overlay">
                <h2 class="card-title">Food</h2>
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>

    <a target="_blank" href="https://icons8.com/icon/38207/runescape"
      >RuneScape</a
    >
    icon by <a target="_blank" href="https://icons8.com">Icons8</a>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <script>
      const categorySelect = document.getElementById("category");
      const sections = document.querySelectorAll(".category-section");

      categorySelect.addEventListener("change", () => {
        const value = categorySelect.value;
        console.log("current value: ", value);
        sections.forEach((section) => section.classList.add("d-none"));

        if (value) {
          const target = document.getElementById(`${value}-fields`);
          if (target) target.classList.remove("d-none");
        }
      });
    </script>
  </body>
</html>
